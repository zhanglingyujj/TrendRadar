name: Sync Template

on:
  workflow_dispatch:
  schedule:
    - cron: "0 0 * * 1"

jobs:
  repo-sync:
    runs-on: ubuntu-latest
    # 注意：permissions 必须与 runs-on 平级
    permissions:
      contents: write
      pull-requests: write
      workflows: write  # 核心权限：允许修改工作流文件

    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          # 必须设置为 0 以获取所有历史记录，否则 merge 可能会失败
          fetch-depth: 0

      - name: Actions Template Sync
        uses: AndreasAugustin/actions-template-sync@v2
        with:
          source_repo_path: sansan0/TrendRadar # 确认这是你的模板源
          upstream_branch: main
          # 使用内置的 GITHUB_TOKEN
          github_token: ${{ secrets.GITHUB_TOKEN }}